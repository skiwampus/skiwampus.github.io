<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="TLC">
    <link rel="apple-touch-startup-image" href="/apple-touch-icon.png">
    <title>Memorize "The Living Christ"</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://use.typekit.net/ypa5rqy.css">
    <style>
        body {
            font-family: 'source-sans-pro', sans-serif;
            transition: background-color 0.3s, color 0.3s;
            margin: 0;
            padding: 0;
        }
        a, a:link, a:visited {
            text-decoration: none;
            color: #005566;    
        }
        body.light-mode {
            background-color: #fff;
            color: #1a1a1a;
        }
        body.dark-mode {
            background-color: #2f2f2f;
            color: #f8f9fa;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 15px;
        }
        h1 {
            font-family: 'source-sans-pro', sans-serif;
            font-size: 1.5rem;
            color: #1a1a1a;
            text-align: center;
            margin-bottom: 10px;
        }
        body.dark-mode h1 {
            color: #f8f9fa;
        }
        hr {
            border-top: 1px solid #6f818f;
            margin: 10px 0 20px;
        }
        #text-display, #flashcard-display {
            font-weight: 300;
            background-color: #fff;
            padding: 20px;
            border-radius: 4px;
            font-size: 1.5rem;
            line-height: 1.7;
            margin-bottom: 20px;
        }
        body.dark-mode #text-display, body.dark-mode #flashcard-display {
            background-color: #3a3a3a;
            color: #f8f9fa;
        }
        .hidden-word {
            background-color: #d3d3d3;
            color: #d3d3d3;
            padding: 0 4px;
            border-radius: 3px;
            cursor: pointer;
        }
        body.dark-mode .hidden-word {
            background-color: #5a5a5a;
            color: #5a5a5a;
        }
        .visible-word {
            color: #1a1a1a;
            padding: 0;
            cursor: pointer;
        }
        body.dark-mode .visible-word {
            color: #f8f9fa;
        }
        .controls {
            font-family: 'source-sans-pro', sans-serif;
            background-color: #f5f6f5;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        body.dark-mode .controls {
            background-color: #3a3a3a;
        }
        .form-label {
            font-weight: 600;
            color: #1a1a1a;
        }
        body.dark-mode .form-label {
            color: #f8f9fa;
        }
        .form-select, .form-range {
            border-color: #6f818f;
        }
        .slider-label {
            font-size: 1rem;
            margin-bottom: 5px;
        }
        /* Custom slider styling */
        #hide-controls {
            margin-bottom: 0 !important;
        }
        #hide-percentage::-webkit-slider-thumb {
            background: #005566;
            cursor: pointer;
            height: 1.2rem;
            width: 1.2rem;
            border-radius: 50%;
            border: 0;
        }
        #hide-percentage::-webkit-slider-thumb:hover,
        #hide-percentage::-webkit-slider-thumb:active {
            background: #003f4b;
        }
        #hide-percentage::-moz-range-thumb {
            background: #005566;
            cursor: pointer;
            height: 1.2rem;
            width: 1.2rem;
            border-radius: 50%;
            border: 0;
        }
        #hide-percentage::-moz-range-thumb:hover,
        #hide-percentage::-moz-range-thumb:active {
            background: #003f4b;
        }
        #hide-percentage::-webkit-slider-runnable-track {
            background: #d3d3d3;
            height: 0.4rem;
            border-radius: 4px;
        }
        #hide-percentage::-moz-range-track {
            background: #d3d3d3;
            height: 0.4rem;
            border-radius: 4px;
        }
        body.dark-mode #hide-percentage::-webkit-slider-thumb {
            background: #17a2b8;
        }
        body.dark-mode #hide-percentage::-webkit-slider-thumb:hover,
        body.dark-mode #hide-percentage::-webkit-slider-thumb:active {
            background: #0d6efd;
        }
        body.dark-mode #hide-percentage::-moz-range-thumb {
            background: #17a2b8;
        }
        body.dark-mode #hide-percentage::-moz-range-thumb:hover,
        body.dark-mode #hide-percentage::-moz-range-thumb:active {
            background: #0d6efd;
        }
        body.dark-mode #hide-percentage::-webkit-slider-runnable-track {
            background: #5a5a5a;
        }
        body.dark-mode #hide-percentage::-moz-range-track {
            background: #5a5a5a;
        }
        #hide-percentage {
            width: 100%;
        }
        .progress-section {
            margin-bottom: 20px;
        }
        .progress-section h5 {
            font-family: 'source-sans-pro', sans-serif;
            font-size: 1.0rem;
            color: #1a1a1a;
        }
        body.dark-mode .progress-section h5 {
            color: #f8f9fa;
        }
        .progress-bar {
            background-color: #005566;
            transition: width 0.3s;
        }
        .form-check-label {
            font-family: 'source-sans-pro', sans-serif;
            font-size: 0.9rem;
            color: #1a1a1a;
        }
        body.dark-mode .form-check-label {
            color: #f8f9fa;
        }
        .flashcard-controls {
            font-family: 'source-sans-pro', sans-serif;
            text-align: center;
        }
        .flashcard-controls .btn {
            background-color: #005566;
            border-color: #005566;
            margin: 0 10px;
        }
        .flashcard-controls .btn:hover {
            background-color: #003f4b;
            border-color: #003f4b;
        }
        .theme-toggle {
            background-color: #005566;
            border-color: #005566;
            color: #fff;
        }
        .theme-toggle:hover {
            background-color: #003f4b;
            border-color: #003f4b;
            color: #fff;
        }
        /* Optional background image (replace with image) */
        /*
        body.light-mode {
            background-image: url('path-to-christ-image.jpg');
            background-size: cover;
            background-attachment: fixed;
        }
        .container {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 8px;
        }
        */
        .form-check-input:checked {
            background-color: #005566;
            border-color: #005566;
        }
        @media (max-width: 576px) {
            h1 {
                font-size: 1.5rem;
            }
            #text-display, #flashcard-display {
                font-size: 1.rem;
                padding: 15px;
            }
            .controls {
                padding: 10px;
            }
            .theme-toggle {
                top: 10px;
                right: 10px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body class="light-mode">
    <div class="container">
        <h1>Memorize "The Living Christ"</h1>
        <hr>
        <div class="controls">
            <div class="mb-3">
                <label for="paragraph-select" class="form-label">Select Paragraph</label>
                <select id="paragraph-select" class="form-select">
                    <option value="all">All Paragraphs</option>
                    <!-- Options populated by JavaScript -->
                </select>
            </div>
            <div class="mb-3">
                <label for="mode-select" class="form-label">Display Mode</label>
                <select id="mode-select" class="form-select">
                    <option value="full">Full Text</option>
                    <option value="hide">Hide Words</option>
                    <option value="first">First Letter Only</option>
                    <option value="flashcard">Flashcard Mode</option>
                    <option value="flashcard-first">Flashcard with First Word</option>
                </select>
            </div>
            <div id="hide-controls" class="mb-3" style="display: none;">
                <label for="hide-percentage" class="slider-label">Percentage of Words to Hide: <span id="percentage-value">50</span>%</label>
                <input type="range" id="hide-percentage" class="form-range" min="10" max="90" value="50">
            </div>
        </div>
        <div id="text-display"></div>
        <div id="flashcard-display" style="display: none;">
            <p id="flashcard-text"></p>
            <div class="flashcard-controls">
                <button id="prev-sentence" class="btn btn-primary">Previous</button>
                <button id="next-sentence" class="btn btn-primary">Next</button>
            </div>
        </div>
        <div class="progress-section">
            <h5>Track Progress: <span id="progress-percentage">0%</span></h5>
            <div class="progress">
                <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <div id="progress-checkboxes" class="mt-2"></div>
        </div>
        <p>Created to help you memorize <a href="https://www.churchofjesuschrist.org/study/scriptures/the-living-christ-the-testimony-of-the-apostles/the-living-christ-the-testimony-of-the-apostles" target="_blank">"The Living Christ: The Testimony of the Apostles"</a>. Not endorsed by The Church of Jesus Christ of Latter-day Saints.</p>
        <button class="btn theme-toggle" id="theme-toggle">Dark Mode</button>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
const fullText = `As we commemorate the birth of Jesus Christ two millennia ago, we offer our testimony of the reality of His matchless life and the infinite virtue of His great atoning sacrifice. None other has had so profound an influence upon all who have lived and will yet live upon the earth.

He was the Great Jehovah of the Old Testament, the Messiah of the New. Under the direction of His Father, He was the creator of the earth. “All things were made by him; and without him was not any thing made that was made” (John 1:3). Though sinless, He was baptized to fulfill all righteousness. He “went about doing good” (Acts 10:38), yet was despised for it.

His gospel was a message of peace and goodwill. He entreated all to follow His example. He walked the roads of Palestine, healing the sick, causing the blind to see, and raising the dead. He taught the truths of eternity, the reality of our premortal existence, the purpose of our life on earth, and the potential for the sons and daughters of God in the life to come.

He instituted the sacrament as a reminder of His great atoning sacrifice. He was arrested and condemned on spurious charges, convicted to satisfy a mob, and sentenced to die on Calvary’s cross. He gave His life to atone for the sins of all mankind. His was a great vicarious gift in behalf of all who would ever live upon the earth.

We solemnly testify that His life, which is central to all human history, neither began in Bethlehem nor concluded on Calvary. He was the Firstborn of the Father, the Only Begotten Son in the flesh, the Redeemer of the world.

He rose from the grave to “become the firstfruits of them that slept” (1 Corinthians 15:20). As Risen Lord, He visited among those He had loved in life. He also ministered among His “other sheep” (John 10:16) in ancient America. In the modern world, He and His Father appeared to the boy Joseph Smith, ushering in the long-promised “dispensation of the fulness of times” (Ephesians 1:10).

Of the Living Christ, the Prophet Joseph wrote: “His eyes were as a flame of fire; the hair of his head was white like the pure snow; his countenance shone above the brightness of the sun; and his voice was as the sound of the rushing of great waters, even the voice of Jehovah, saying: “I am the first and the last; I am he who liveth, I am he who was slain; I am your advocate with the Father” (D&C 110:3–4).

Of Him the Prophet also declared: “And now, after the many testimonies which have been given of him, this is the testimony, last of all, which we give of him: That he lives! “For we saw him, even on the right hand of God; and we heard the voice bearing record that he is the Only Begotten of the Father— “That by him, and through him, and of him, the worlds are and were created, and the inhabitants thereof are begotten sons and daughters unto God” (D&C 76:22–24).

We declare in words of solemnity that His priesthood and His Church have been restored upon the earth—“built upon the foundation of … apostles and prophets, Jesus Christ himself being the chief corner stone” (Ephesians 2:20).

We testify that He will someday return to earth. “And the glory of the Lord shall be revealed, and all flesh shall see it together” (Isaiah 40:5). He will rule as King of Kings and reign as Lord of Lords, and every knee shall bend and every tongue shall speak in worship before Him. Each of us will stand to be judged of Him according to our works and the desires of our hearts.

We bear testimony, as His duly ordained Apostles—that Jesus is the Living Christ, the immortal Son of God. He is the great King Immanuel, who stands today on the right hand of His Father. He is the light, the life, and the hope of the world. His way is the path that leads to happiness in this life and eternal life in the world to come. God be thanked for the matchless gift of His divine Son.`;

        // Split text into paragraphs
        const paragraphs = fullText.split('\n\n');

        // State variables
        let currentMode = 'full';
        let hidePercentage = 50;
        let selectedParagraph = 'all';
        let currentSentenceIndex = 0;
        let sentences = [];
        let progress = Array(paragraphs.length).fill(false); // Track memorized paragraphs

        // Load settings from local storage
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('livingChristSettings')) || {};
            currentMode = settings.mode || 'full';
            hidePercentage = settings.hidePercentage || 50;
            selectedParagraph = settings.selectedParagraph || 'all';
            progress = settings.progress || Array(paragraphs.length).fill(false);
            document.body.className = settings.theme || 'light-mode';
            document.getElementById('theme-toggle').textContent = settings.theme === 'dark-mode' ? 'Light Mode' : 'Dark Mode';
        }

        // Save settings to local storage
        function saveSettings() {
            localStorage.setItem('livingChristSettings', JSON.stringify({
                mode: currentMode,
                hidePercentage: hidePercentage,
                selectedParagraph: selectedParagraph,
                theme: document.body.className,
                progress: progress
            }));
        }

        // Populate paragraph select
        function populateParagraphSelect() {
            const select = document.getElementById('paragraph-select');
            paragraphs.forEach((_, i) => {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = `Paragraph ${i + 1}`;
                select.appendChild(option);
            });
            select.value = selectedParagraph;
        }

        // Populate progress checkboxes
        function populateProgressCheckboxes() {
            const container = document.getElementById('progress-checkboxes');
            container.innerHTML = '';
            paragraphs.forEach((_, i) => {
                const div = document.createElement('div');
                div.className = 'form-check form-check-inline';
                div.innerHTML = `
                    <input class="form-check-input" type="checkbox" id="progress-${i}" ${progress[i] ? 'checked' : ''}>
                    <label class="form-check-label" for="progress-${i}">P${i + 1}</label>
                `;
                container.appendChild(div);
                document.getElementById(`progress-${i}`).addEventListener('change', (e) => {
                    progress[i] = e.target.checked;
                    updateProgress();
                    saveSettings();
                });
            });
            updateProgress();
        }

        // Update progress bar
        function updateProgress() {
            const completed = progress.filter(Boolean).length;
            const percentage = Math.round((completed / paragraphs.length) * 100);
            document.getElementById('progress-percentage').textContent = `${percentage}%`;
            document.getElementById('progress-bar').style.width = `${percentage}%`;
            document.getElementById('progress-bar').setAttribute('aria-valuenow', percentage);
        }

        // Split paragraph into sentences
        function getSentences(paragraph) {
            return paragraph.split(/(?<=[.!?—:])\s+/).filter(s => s.trim());
        }

        // Display text based on mode
        function displayText() {
            const textDisplay = document.getElementById('text-display');
            const flashcardDisplay = document.getElementById('flashcard-display');
            textDisplay.style.display = (currentMode === 'flashcard' || currentMode === 'flashcard-first') ? 'none' : 'block';
            flashcardDisplay.style.display = (currentMode === 'flashcard' || currentMode === 'flashcard-first') ? 'block' : 'none';

            if (currentMode === 'flashcard') {
                displayFlashcard();
                return;
            } else if (currentMode === 'flashcard-first') {
                displayFlashcardFirstWord();
                return;
            }

            textDisplay.innerHTML = '';
            const displayParagraphs = selectedParagraph === 'all' ? paragraphs : [paragraphs[selectedParagraph]];

            displayParagraphs.forEach((paragraph, index) => {
                const p = document.createElement('p');
                const words = paragraph.split(' ');
                p.setAttribute('data-index', index);

                if (currentMode === 'full') {
                    p.textContent = paragraph;
                } else if (currentMode === 'hide') {
                    p.innerHTML = words.map(word => {
                        if (/^[.,!?;]$/.test(word)) return word;
                        const isHidden = Math.random() < hidePercentage / 100;
                        return `<span class="${isHidden ? 'hidden-word' : 'visible-word'}" data-word="${word}" data-hidden="${isHidden}">${isHidden ? word : word}</span>`;
                    }).join(' ');
                } else if (currentMode === 'first') {
                    p.innerHTML = words.map(word => {
                        if (/^[.,!?;]$/.test(word)) return word;
                        // Find the first alphabetic letter or number
                        let firstLetterIndex = 0;
                        while (firstLetterIndex < word.length && !/[a-zA-Z0-9]/.test(word[firstLetterIndex])) {
                            firstLetterIndex++;
                        }
                        if (firstLetterIndex >= word.length) {
                            // No alphabetic letters or numbers; treat as punctuation
                            return word;
                        }
                        const firstLetter = word[firstLetterIndex];
                        const prefix = word.slice(0, firstLetterIndex);
                        const rest = word.slice(firstLetterIndex + 1);
                        return `${prefix}<span class="first-letter">${firstLetter}</span><span class="hidden-word" data-word="${prefix}${rest}" data-hidden="true">${rest}</span>`;
                    }).join(' ');
                }

                textDisplay.appendChild(p);
            });

            // Add click event listeners for toggling
            document.querySelectorAll('.hidden-word, .visible-word').forEach(span => {
                span.addEventListener('click', () => {
                    const isHidden = span.getAttribute('data-hidden') === 'true';
                    span.className = isHidden ? 'visible-word' : 'hidden-word';
                    span.setAttribute('data-hidden', !isHidden);
                });
            });
        }

        // Display standard flashcard
        function displayFlashcard() {
            const flashcardText = document.getElementById('flashcard-text');
            const paragraph = selectedParagraph === 'all' ? fullText : paragraphs[selectedParagraph];
            sentences = getSentences(paragraph);

            if (currentSentenceIndex >= sentences.length) currentSentenceIndex = 0;
            if (currentSentenceIndex < 0) currentSentenceIndex = sentences.length - 1;

            flashcardText.textContent = sentences[currentSentenceIndex] || 'No sentences available.';
        }

        // Display flashcard with first word visible
        function displayFlashcardFirstWord() {
            const flashcardText = document.getElementById('flashcard-text');
            const paragraph = selectedParagraph === 'all' ? fullText : paragraphs[selectedParagraph];
            sentences = getSentences(paragraph);

            if (currentSentenceIndex >= sentences.length) currentSentenceIndex = 0;
            if (currentSentenceIndex < 0) currentSentenceIndex = sentences.length - 1;

            const sentence = sentences[currentSentenceIndex] || 'No sentences available.';
            const words = sentence.split(' ');
            flashcardText.innerHTML = words.map((word, index) => {
                if (/^[.,!?;]$/.test(word)) return word;
                const isHidden = index !== 0; // First word (index 0) is visible, others hidden
                return `<span class="${isHidden ? 'hidden-word' : 'visible-word'}" data-word="${word}" data-hidden="${isHidden}">${word}</span>`;
            }).join(' ');

            // Add click event listeners for toggling
            flashcardText.querySelectorAll('.hidden-word, .visible-word').forEach(span => {
                span.addEventListener('click', () => {
                    const isHidden = span.getAttribute('data-hidden') === 'true';
                    span.className = isHidden ? 'visible-word' : 'hidden-word';
                    span.setAttribute('data-hidden', !isHidden);
                });
            });
        }

        // Initialize
        loadSettings();
        populateParagraphSelect();
        populateProgressCheckboxes();
        document.getElementById('mode-select').value = currentMode;
        document.getElementById('hide-percentage').value = hidePercentage;
        document.getElementById('percentage-value').textContent = hidePercentage;
        document.getElementById('hide-controls').style.display = currentMode === 'hide' ? 'block' : 'none';
        displayText();

        // Event listeners
        document.getElementById('mode-select').addEventListener('change', (e) => {
            currentMode = e.target.value;
            document.getElementById('hide-controls').style.display = currentMode === 'hide' ? 'block' : 'none';
            currentSentenceIndex = 0; // Reset for flashcard modes
            displayText();
            saveSettings();
        });

        document.getElementById('hide-percentage').addEventListener('input', (e) => {
            hidePercentage = e.target.value;
            document.getElementById('percentage-value').textContent = hidePercentage;
            displayText();
            saveSettings();
        });

        document.getElementById('paragraph-select').addEventListener('change', (e) => {
            selectedParagraph = e.target.value;
            currentSentenceIndex = 0; // Reset for flashcard modes
            displayText();
            saveSettings();
        });

        document.getElementById('theme-toggle').addEventListener('click', () => {
            document.body.className = document.body.className === 'light-mode' ? 'dark-mode' : 'light-mode';
            document.getElementById('theme-toggle').textContent = document.body.className === 'dark-mode' ? 'Light Mode' : 'Dark Mode';
            saveSettings();
        });

        document.getElementById('prev-sentence').addEventListener('click', () => {
            currentSentenceIndex--;
            if (currentMode === 'flashcard') {
                displayFlashcard();
            } else if (currentMode === 'flashcard-first') {
                displayFlashcardFirstWord();
            }
        });

        document.getElementById('next-sentence').addEventListener('click', () => {
            currentSentenceIndex++;
            if (currentMode === 'flashcard') {
                displayFlashcard();
            } else if (currentMode === 'flashcard-first') {
                displayFlashcardFirstWord();
            }
        });
    </script>
</body>
</html>