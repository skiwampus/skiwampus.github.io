<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memorize "O Cristo Vivo"</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://use.typekit.net/ypa5rqy.css">
    <style>
        body {
            font-family: 'source-sans-pro', sans-serif;
            transition: background-color 0.3s, color 0.3s;
            margin: 0;
            padding: 0;
        }
		a, a:link, a:visited {
			text-decoration: none;
			color: #005566;	
		}
        body.light-mode {
            background-color: #fff;
            color: #1a1a1a;
        }
        body.dark-mode {
            background-color: #2f2f2f;
            color: #f8f9fa;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 15px;
        }
        h1 {
            font-family: 'source-sans-pro', sans-serif;
            font-size: 2.0rem;
            color: #1a1a1a;
            text-align: center;
            margin-bottom: 10px;
        }
        body.dark-mode h1 {
            color: #f8f9fa;
        }
        hr {
            border-top: 1px solid #6f818f;
            margin: 10px 0 20px;
        }
        #text-display, #flashcard-display {
            font-weight: 300;
			background-color: #fff;
            padding: 20px;
            border-radius: 4px;
            font-size: 1.3rem;
            line-height: 1.7;
            margin-bottom: 20px;
        }
        body.dark-mode #text-display, body.dark-mode #flashcard-display {
            background-color: #3a3a3a;
            color: #f8f9fa;
        }
        .hidden-word {
            background-color: #d3d3d3;
            color: #d3d3d3;
            padding: 0 4px;
            border-radius: 3px;
			cursor: pointer;
        }
        body.dark-mode .hidden-word {
            background-color: #5a5a5a;
            color: #5a5a5a;
        }
		.visible-word {
            color: #1a1a1a;
            padding: 0;
            cursor: pointer;
        }
        body.dark-mode .visible-word {
            color: #f8f9fa;
        }
        .controls {
            font-family: 'source-sans-pro', sans-serif;
			background-color: #f5f6f5;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        body.dark-mode .controls {
            background-color: #3a3a3a;
        }
        .form-label {
            font-weight: 600;
            color: #1a1a1a;
        }
        body.dark-mode .form-label {
            color: #f8f9fa;
        }
        .form-select, .form-range {
            border-color: #6f818f;
        }
        .slider-label {
            font-size: 1rem;
            margin-bottom: 5px;
        }
		/* Custom slider styling */
		#hide-controls {
			margin-bottom: 0 !important;
		}
		#hide-percentage::-webkit-slider-thumb {
			background: #005566;
			cursor: pointer;
			height: 1.2rem;
			width: 1.2rem;
			border-radius: 50%;
			border: 0;
		}
		#hide-percentage::-webkit-slider-thumb:hover,
		#hide-percentage::-webkit-slider-thumb:active {
			background: #003f4b;
		}
		#hide-percentage::-moz-range-thumb {
			background: #005566;
			cursor: pointer;
			height: 1.2rem;
			width: 1.2rem;
			border-radius: 50%;
			border: 0;
		}
		#hide-percentage::-moz-range-thumb:hover,
		#hide-percentage::-moz-range-thumb:active {
			background: #003f4b;
		}
		#hide-percentage::-webkit-slider-runnable-track {
			background: #d3d3d3;
			height: 0.4rem;
			border-radius: 4px;
		}
		#hide-percentage::-moz-range-track {
			background: #d3d3d3;
			height: 0.4rem;
			border-radius: 4px;
		}
		body.dark-mode #hide-percentage::-webkit-slider-thumb {
			background: #17a2b8;
		}
		body.dark-mode #hide-percentage::-webkit-slider-thumb:hover,
		body.dark-mode #hide-percentage::-webkit-slider-thumb:active {
			background: #0d6efd;
		}
		body.dark-mode #hide-percentage::-moz-range-thumb {
			background: #17a2b8;
		}
		body.dark-mode #hide-percentage::-moz-range-thumb:hover,
		body.dark-mode #hide-percentage::-moz-range-thumb:active {
			background: #0d6efd;
		}
		body.dark-mode #hide-percentage::-webkit-slider-runnable-track {
			background: #5a5a5a;
		}
		body.dark-mode #hide-percentage::-moz-range-track {
			background: #5a5a5a;
		}
        #hide-percentage {
            width: 100%;
        }
        .progress-section {
            margin-bottom: 20px;
        }
        .progress-section h5 {
            font-family: 'source-sans-pro', sans-serif;
            font-size: 1.0rem;
            color: #1a1a1a;
        }
        body.dark-mode .progress-section h5 {
            color: #f8f9fa;
        }
        .progress-bar {
            background-color: #005566;
            transition: width 0.3s;
        }
        .form-check-label {
            font-family: 'source-sans-pro', sans-serif;
			font-size: 0.9rem;
            color: #1a1a1a;
        }
        body.dark-mode .form-check-label {
            color: #f8f9fa;
        }
        .flashcard-controls {
            font-family: 'source-sans-pro', sans-serif;
			text-align: center;

        }
        .flashcard-controls .btn {
            background-color: #005566;
            border-color: #005566;
            margin: 0 10px;
        }
        .flashcard-controls .btn:hover {
            background-color: #003f4b;
            border-color: #003f4b;
        }
        .theme-toggle {
            background-color: #005566;
            border-color: #005566;
            color: #fff;
			display: none;
        }
        .theme-toggle:hover {
            background-color: #003f4b;
            border-color: #003f4b;
			color: #fff;
        }
        /* Optional background image (replace with image) */
        /*
        body.light-mode {
            background-image: url('path-to-christ-image.jpg');
            background-size: cover;
            background-attachment: fixed;
        }
        .container {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 8px;
        }
        */
		.form-check-input:checked {
			background-color: #005566;
			border-color: #005566;
		}
        @media (max-width: 576px) {
            h1 {
                font-size: 1.8rem;
            }
            #text-display, #flashcard-display {
                font-size: 1.3rem;
                padding: 15px;
            }
            .controls {
                padding: 10px;
            }
            .theme-toggle {
                top: 10px;
                right: 10px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body class="light-mode">
    <div class="container">
        <h1>Memorize "O Cristo Vivo"</h1>
        <hr>
        <div class="controls">
            <div class="mb-3">
                <label for="paragraph-select" class="form-label">Parágrafo</label>
                <select id="paragraph-select" class="form-select">
                    <option value="all">Todos os Parágrafos</option>
                    <!-- Options populated by JavaScript -->
                </select>
            </div>
            <div class="mb-3">
                <label for="mode-select" class="form-label">Modo de Exibição</label>
                <select id="mode-select" class="form-select">
                    <option value="full">Texto Completo</option>
                    <option value="hide">Esconder Palavras</option>
                    <option value="first">Apenas a Primeira Letra</option>
                    <option value="flashcard">Modo Flashcard</option>
                </select>
            </div>
            <div id="hide-controls" class="mb-3" style="display: none;">
                <label for="hide-percentage" class="slider-label">Porcentagem de Palavras a Serem Ocultadas: <span id="percentage-value">50</span>%</label>
                <input type="range" id="hide-percentage" class="form-range" min="10" max="90" value="50">
            </div>
        </div>
        <div id="text-display"></div>
        <div id="flashcard-display" style="display: none;">
            <p id="flashcard-text"></p>
            <div class="flashcard-controls">
                <button id="prev-sentence" class="btn btn-primary">Anterior</button>
                <button id="next-sentence" class="btn btn-primary">Próximo</button>
            </div>
        </div>
		<div class="progress-section">
            <h5>Acompanhar o Progresso: <span id="progress-percentage">0%</span></h5>
            <div class="progress">
                <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <div id="progress-checkboxes" class="mt-2"></div>
        </div>
		<p>Criado para ajudar você a memorizar <a href="https://www.churchofjesuschrist.org/study/scriptures/the-living-christ-the-testimony-of-the-apostles/the-living-christ-the-testimony-of-the-apostles?lang=por" target="_blank">"O Cristo Vivo
: O Testemunho dos Apóstolos"</a>. Não endossado por A Igreja de Jesus Cristo dos Santos dos Últimos Dias.</p>
		<button class="btn theme-toggle" id="theme-toggle">Dark Mode</button>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
		const fullText = `Ao comemorarmos o nascimento de Jesus Cristo, ocorrido há dois mil anos, oferecemos nosso testemunho da realidade de Sua vida incomparável e o infinito poder de Seu grande sacrifício expiatório. Ninguém mais exerceu uma influência tão profunda sobre todos os que já viveram e ainda viverão sobre a face da Terra.

		Ele foi o Grande Jeová do Velho Testamento e o Messias do Novo Testamento. Sob a direção de Seu Pai, Ele foi o criador da Terra. “Todas as coisas foram feitas por ele, e sem ele nada do que foi feito se fez.” (João 1:3) Embora jamais tivesse cometido pecado, Ele foi batizado para cumprir toda a justiça. Ele “andou fazendo o bem” (Atos 10:38), mas foi desprezado por isso.

		Seu evangelho era uma mensagem de paz e boa vontade. Ele pediu a todos que seguissem Seu exemplo. Ele caminhou pelas estradas da Palestina, curando os enfermos, fazendo com que os cegos vissem e levantando os mortos. Ele ensinou as verdades da eternidade, a realidade de nossa existência pré-mortal, o propósito de nossa vida na Terra e o potencial que os filhos e filhas de Deus têm em relação à vida futura.

		Ele instituiu o sacramento como lembrança de Seu grande sacrifício expiatório. Foi preso e condenado por falsas acusações, para satisfazer uma multidão enfurecida, e sentenciado a morrer na cruz do Calvário. Ele deu Sua vida para expiar os pecados de toda a humanidade. Seu sacrifício foi uma grandiosa dádiva vicária em favor de todos os que viveriam sobre a face da Terra.

		Prestamos solene testemunho de que Sua vida, que é o ponto central de toda a história humana, não começou em Belém nem se encerrou no Calvário. Ele foi o Primogênito do Pai, o Filho Unigênito na carne, o Redentor do mundo.

		Ele levantou-Se do sepulcro para ser “feito as primícias dos que dormem”. (1 Coríntios 15:20) Como Senhor Ressuscitado, Ele visitou aqueles que havia amado em vida. Ele também ministrou a Suas “outras ovelhas” (João 10:16) na antiga América. No mundo moderno, Ele e Seu Pai apareceram ao menino Joseph Smith, dando início à prometida “dispensação da plenitude dos tempos”. (Efésios 1:10)

		A respeito do Cristo Vivo, o Profeta Joseph escreveu: “Os seus olhos eram como uma labareda de fogo; os cabelos de sua cabeça eram brancos como a pura neve; o seu semblante resplandecia mais do que o brilho do sol; e a sua voz era como o ruído de muitas águas, sim, a voz de Jeová, que dizia: Eu sou o primeiro e o último; sou o que vive, sou o que foi morto; eu sou o vosso advogado junto ao Pai”. (D&C 110:3–4)

		A respeito Dele, o Profeta também declarou: “E agora, depois dos muitos testemunhos que se prestaram dele, este é o testemunho, último de todos, que nós damos dele: Que ele vive! Porque o vimos, sim, à direita de Deus; e ouvimos a voz testificando que ele é o Unigênito do Pai — Que por ele e por meio dele e dele os mundos são e foram criados; e seus habitantes são filhos e filhas gerados para Deus”. (D&C 76:22–24)

		Declaramos solenemente que Seu sacerdócio e Sua Igreja foram restaurados na Terra, “edificados sobre o fundamento dos apóstolos e dos profetas, de que Jesus Cristo é a principal pedra da esquina”. (Efésios 2:20)

		Testificamos que Ele voltará um dia à Terra. “E a glória do Senhor se manifestará, e toda a carne juntamente verá” (Isaías 40:5). Ele governará como Rei dos Reis e reinará como Senhor dos Senhores, e todo joelho se dobrará e toda língua confessará em adoração perante Ele. Cada um de nós será julgado por Ele de acordo com nossas obras e os desejos de nosso coração.

		Prestamos testemunho, como Apóstolos Seus, devidamente ordenados, de que Jesus é o Cristo Vivo, o Filho imortal de Deus. Ele é o grande Rei Emanuel, que hoje Se encontra à direita de Seu Pai. Ele é a luz, a vida e a esperança do mundo. Seu caminho é aquele que conduz à felicidade nesta vida e à vida eterna no mundo vindouro. Graças damos a Deus pela incomparável dádiva de Seu Filho divino.`;

        // Split text into paragraphs
        const paragraphs = fullText.split('\n\n');

        // State variables
        let currentMode = 'full';
        let hidePercentage = 50;
        let selectedParagraph = 'all';
        let currentSentenceIndex = 0;
        let sentences = [];
        let progress = Array(paragraphs.length).fill(false); // Track memorized paragraphs

        // Load settings from local storage
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('livingChristSettings')) || {};
            currentMode = settings.mode || 'full';
            hidePercentage = settings.hidePercentage || 50;
            selectedParagraph = settings.selectedParagraph || 'all';
            progress = settings.progress || Array(paragraphs.length).fill(false);
            document.body.className = settings.theme || 'light-mode';
            document.getElementById('theme-toggle').textContent = settings.theme === 'dark-mode' ? 'Light Mode' : 'Dark Mode';
        }

        // Save settings to local storage
        function saveSettings() {
            localStorage.setItem('livingChristSettings', JSON.stringify({
                mode: currentMode,
                hidePercentage: hidePercentage,
                selectedParagraph: selectedParagraph,
                theme: document.body.className,
                progress: progress
            }));
        }

        // Populate paragraph select
        function populateParagraphSelect() {
            const select = document.getElementById('paragraph-select');
            paragraphs.forEach((_, i) => {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = `Parágrafo ${i + 1}`;
                select.appendChild(option);
            });
            select.value = selectedParagraph;
        }

        // Populate progress checkboxes
        function populateProgressCheckboxes() {
            const container = document.getElementById('progress-checkboxes');
            container.innerHTML = '';
            paragraphs.forEach((_, i) => {
                const div = document.createElement('div');
                div.className = 'form-check form-check-inline';
                div.innerHTML = `
                    <input class="form-check-input" type="checkbox" id="progress-${i}" ${progress[i] ? 'checked' : ''}>
                    <label class="form-check-label" for="progress-${i}">P${i + 1}</label>
                `;
                container.appendChild(div);
                document.getElementById(`progress-${i}`).addEventListener('change', (e) => {
                    progress[i] = e.target.checked;
                    updateProgress();
                    saveSettings();
                });
            });
            updateProgress();
        }

        // Update progress bar
        function updateProgress() {
            const completed = progress.filter(Boolean).length;
            const percentage = Math.round((completed / paragraphs.length) * 100);
            document.getElementById('progress-percentage').textContent = `${percentage}%`;
            document.getElementById('progress-bar').style.width = `${percentage}%`;
            document.getElementById('progress-bar').setAttribute('aria-valuenow', percentage);
        }

        // Split paragraph into sentences
        function getSentences(paragraph) {
            return paragraph.split(/(?<=[.!?—:])\s+/).filter(s => s.trim());
        }

        // Display text based on mode
        function displayText() {
            const textDisplay = document.getElementById('text-display');
            const flashcardDisplay = document.getElementById('flashcard-display');
            textDisplay.style.display = currentMode === 'flashcard' ? 'none' : 'block';
            flashcardDisplay.style.display = currentMode === 'flashcard' ? 'block' : 'none';

            if (currentMode === 'flashcard') {
                displayFlashcard();
                return;
            }

            textDisplay.innerHTML = '';
            const displayParagraphs = selectedParagraph === 'all' ? paragraphs : [paragraphs[selectedParagraph]];

            displayParagraphs.forEach(paragraph => {
                const p = document.createElement('p');
                const words = paragraph.split(' ');

                if (currentMode === 'full') {
                    p.textContent = paragraph;
                } else if (currentMode === 'hide') {
                    p.innerHTML = words.map(word => {
                        if (/^[.,!?;]$/.test(word)) return word;
                        const isHidden = Math.random() < hidePercentage / 100;
                        return `<span class="${isHidden ? 'hidden-word' : 'visible-word'}" data-word="${word}" data-hidden="${isHidden}">${isHidden ? word : word}</span>`;
                    }).join(' ');
                } else if (currentMode === 'first') {
					p.innerHTML = words.map(word => {
						if (/^[.,!?;]$/.test(word)) return word;
						// Find the first alphabetic letter or number
						let firstLetterIndex = 0;
						while (firstLetterIndex < word.length && !/[a-zA-Z0-9]/.test(word[firstLetterIndex])) {
							firstLetterIndex++;
						}
						if (firstLetterIndex >= word.length) {
							// No alphabetic letters or numbers; treat as punctuation
							return word;
						}
						const firstLetter = word[firstLetterIndex];
						const prefix = word.slice(0, firstLetterIndex);
						const rest = word.slice(firstLetterIndex + 1);
						return `${prefix}<span class="first-letter">${firstLetter}</span><span class="hidden-word" data-word="${prefix}${rest}" data-hidden="true">${rest}</span>`;
					}).join(' ');
				}

                textDisplay.appendChild(p);
            });

            // Add click event listeners for toggling
            document.querySelectorAll('.hidden-word, .visible-word').forEach(span => {
                span.addEventListener('click', () => {
                    const isHidden = span.getAttribute('data-hidden') === 'true';
                    span.className = isHidden ? 'visible-word' : 'hidden-word';
                    span.setAttribute('data-hidden', !isHidden);
                });
            });
        }

        // Display flashcard
        function displayFlashcard() {
            const flashcardText = document.getElementById('flashcard-text');
            const paragraph = selectedParagraph === 'all' ? fullText : paragraphs[selectedParagraph];
            sentences = getSentences(paragraph);

            if (currentSentenceIndex >= sentences.length) currentSentenceIndex = 0;
            if (currentSentenceIndex < 0) currentSentenceIndex = sentences.length - 1;

            flashcardText.textContent = sentences[currentSentenceIndex] || 'No sentences available.';
        }

        // Initialize
        loadSettings();
        populateParagraphSelect();
        populateProgressCheckboxes();
        document.getElementById('mode-select').value = currentMode;
        document.getElementById('hide-percentage').value = hidePercentage;
        document.getElementById('percentage-value').textContent = hidePercentage;
        document.getElementById('hide-controls').style.display = currentMode === 'hide' ? 'block' : 'none';
        displayText();

        // Event listeners
        document.getElementById('mode-select').addEventListener('change', (e) => {
            currentMode = e.target.value;
            document.getElementById('hide-controls').style.display = currentMode === 'hide' ? 'block' : 'none';
            currentSentenceIndex = 0; // Reset for flashcard mode
            displayText();
            saveSettings();
        });

        document.getElementById('hide-percentage').addEventListener('input', (e) => {
            hidePercentage = e.target.value;
            document.getElementById('percentage-value').textContent = hidePercentage;
            displayText();
            saveSettings();
        });

        document.getElementById('paragraph-select').addEventListener('change', (e) => {
            selectedParagraph = e.target.value;
            currentSentenceIndex = 0; // Reset for flashcard mode
            displayText();
            saveSettings();
        });

        document.getElementById('theme-toggle').addEventListener('click', () => {
            document.body.className = document.body.className === 'light-mode' ? 'dark-mode' : 'light-mode';
            document.getElementById('theme-toggle').textContent = document.body.className === 'dark-mode' ? 'Light Mode' : 'Dark Mode';
            saveSettings();
        });

        document.getElementById('prev-sentence').addEventListener('click', () => {
            currentSentenceIndex--;
            displayFlashcard();
        });

        document.getElementById('next-sentence').addEventListener('click', () => {
            currentSentenceIndex++;
            displayFlashcard();
        });
    </script>
</body>
</html>